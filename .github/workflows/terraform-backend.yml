name: Block Backend Apply

# This workflow blocks any apply actions on the backend directory.
# It is triggered on pull requests and pushes to the main, dev, and darsh branches.
on:
  pull_request:
    paths:
      - 'terraform/project-root-remote/backend/**'
  push:
    branches: [main, dev, darsh]
    paths:
      - 'terraform/project-root-remote/backend/**'

jobs:
  block-backend:
    runs-on: ubuntu-latest
    steps:
      - name: Prevent backend apply
        run: |
          echo "‚ùå Applying backend is not allowed through CI."
          exit 1
